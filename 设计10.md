你的修复很好！

---

这段提示词，我感觉需要补充/修改一些内容。
```
            "视觉（图片输入）工具：\n"
            "- 你可以让工具执行：look_imgs <img1> <img2> ...  来把图片转为 base64，写入 /workspace-ai/look_imgs.json。\n"
            "- 警告：look_imgs.json 里是 base64，非常大非常长，不要直接 cat 它。\n"
            "- 同理：session.json 里也可能包含 base64（图片），也不要直接 cat session.json。\n"
            "- 若要检查 look_imgs.json，可用：python -c 'import json;print([{\"path\":x.get(\"path\"),\"mime\":x.get(\"mime\"),\"bytes\":x.get(\"bytes\")} for x in json.load(open(\"/workspace-ai/look_imgs.json\"))])'\n"
            "\n"
            "操作浏览器（有头 + 宿主机可视化）：\n"
            "- 容器内提供：Google Chrome + Xvfb + x11vnc + noVNC（无需密码）。\n"
            "- 建议容器启动时加：--shm-size=2g（避免 Chrome 因 /dev/shm 太小而崩溃）。\n"
            "- 启动 GUI（虚拟显示器 + noVNC）示例：\n"
            "  start-gui\n"
            "  然后让用户在宿主机浏览器打开： http://127.0.0.1:6080/vnc.html\n"
            "- 启动 Chrome（更像真人，供 Playwright 通过 CDP 连接）示例：\n"
            "  /var/lib/bin/google/chrome/google-chrome --remote-debugging-port=9222 --user-data-dir=/workspace-ai/cdp-profile --no-first-run --no-default-browser-check\n"
            "  如果你以 root 运行（少见），需要额外加：--no-sandbox\n"
            "- 你可以用 python playwright 连接：chromium.connect_over_cdp('http://127.0.0.1:9222') 并操作页面。\n"
```

对于`"视觉（图片输入）工具：\n"`部分，你虽然提到了`图片输入`、`look_imgs`命令，但是没有明确的表示：这个工具是用来查看图片的，只有当你是支持视觉的模型时才能使用它。
有两个点，一个是如果要查看图片可以调用这个工具，一个是只有支持视觉时才可以使用它。

对于`"操作浏览器（有头 + 宿主机可视化）：\n"`部分，这句话`"- 容器内提供：Google Chrome + Xvfb + x11vnc + noVNC（无需密码）。\n"`应该表达“容器内已提供”，意思就是已经安装了这些。

`"- 建议容器启动时加：--shm-size=2g（避免 Chrome 因 /dev/shm 太小而崩溃）。\n"`这句话不应该放在提示词中，因为模型使用bash与外界交互，bash是在容器里面执行的，也就意味着模型已经在容器里面了，它无法决定容器启动的参数，它也不负责容器启动。

`"  如果你以 root 运行（少见），需要额外加：--no-sandbox\n"`，这句话缺少一个补充，只能用root运行的原因是当前用户是root，而当前用户的UID GID来自宿主机，通常情况下不是root，如果是root则只能用`--no-sandbox`参数启动谷歌浏览器，否则谷歌浏览器会报错。

对于`"操作浏览器（有头 + 宿主机可视化）：\n"`部分，我感觉从运行start-gui到用python playwright操作浏览器，是有顺序的，需要表达出这种顺序感。

---

对于视觉，我们有一些麻烦，让我来理清一下：
- OpenAI API
  + 支持视觉的模型
    - 使用look_imgs命令
  + 不支持视觉的模型
    - 不使用look_imgs命令
- 其他供应商
  + 支持视觉的模型
    - 不使用look_imgs命令
  + 不支持视觉的模型
    - 不使用look_imgs命令

刚刚我提到需要在提示词中表达只有支持视觉时才可以使用look_imgs命令。但是这远远不够。

这可以解决`OpenAI API.不支持视觉的模型`这部分，但无法解决`其他供应商`部分。虽然你用了`"[yellow]提示：检测到 look_imgs.json（图片 base64），但当前模型不是 OpenAI 视觉模型；已清空该文件，且不会注入到消息中。[/yellow]\n"`，但是对于`其他供应商.支持视觉的模型`来说，它只看到提示词中告诉它可以使用look_imgs命令来查看图片，然后它使用了，但是不起作用。

为了解决这个问题，我觉得一个较好的方式是：`"视觉（图片输入）工具：\n"`这部分提示词在`OpenAISDKClient`类中注入到系统提示词中当前的`"视觉（图片输入）工具：\n"`位置，而不是全局加上。

---

一个与新增功能不太相关的改动，模型不知道容器是以`--network host`形式启动的，但是模型会在容器内启动很多服务，这些服务想要在宿主机上供用户访问，模型就要思考很多。于是，告诉模型容器是以`--network host`启动的，是很便宜的方法，解决了模型的困惑。

---

仍和之前一样：
你在给我代码的时候，如果改动的地方较多、较零碎，则给我完整的代码，我全文覆盖。
如果改动的地方较少、成块、不零碎，则给我需要修改的那个部分修改后的代码，告诉我粘贴到哪个位置。